<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Flights</title>
</head>
<body>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
<style type="text/css">
	table, th, td{
		border: 1px solid black;
	}
</style>
<h2>Upcoming Flights</h2>
<table>
	<th>Purchase Date/Time</th>
	<th>Airline name</th>
	<th>Flight no.</th>
    <th>Customer Email</th>
	<th>Departure Date</th>
	<th>Departure Time</th>
	<th>Arrival Date</th>
	<th>Arrival Time</th>
	<th>Departure Airport</th>
	<th>Departure City</th>
	<th>Arrival Airport</th>
	<th>Arrival City</th>
    <th>Customer Name</th>
    <th>Sale Price</th>

{% for line in upcoming %}
	<tr>
		<td>{{"{}/{}".format(line['purchase_date'], line['purchase_time'])}}</td>
		<td>{{line['airline_name']}}</td>
		<td>{{line['flight_num']}}</td>
        <td>{{line['customer_email']}}</td>
		<td>{{line['departure_date']}}</td>
		<td>{{line['departure_time']}}</td>
		<td>{{line['arrival_date']}}</td>
		<td>{{line['arrival_time']}}</td>
		<td>{{line['departure_airport_name']}}</td>
		<td>{{line['city']}}</td>
        <td>{{line['arrival_airport_name']}}</td>
		<td>{{line['ar_port.city']}}</td>
        <td>{{line['first_name'] + ' ' + line['last_name']}}</td>
        <td>{{line['sold_price']}}</td>
	</tr>
{% endfor %}
</table>
<h2>Previous Flights</h2>
<table>
	<th>Purchase Date/Time</th>
	<th>Airline name</th>
	<th>Flight no.</th>
    <th>Customer Email</th>
	<th>Departure Date</th>
	<th>Departure Time</th>
	<th>Arrival Date</th>
	<th>Arrival Time</th>
	<th>Departure Airport</th>
	<th>Departure City</th>
	<th>Arrival Airport</th>
	<th>Arrival City</th>
    <th>Customer Name</th>
    <th>Sale Price</th>

{% for line in previous %}
	<tr>
		<td>{{"{}/{}".format(line['purchase_date'], line['purchase_time'])}}</td>
		<td>{{line['airline_name']}}</td>
		<td>{{line['flight_num']}}</td>
        <td>{{line['customer_email']}}</td>
		<td>{{line['departure_date']}}</td>
		<td>{{line['departure_time']}}</td>
		<td>{{line['arrival_date']}}</td>
		<td>{{line['arrival_time']}}</td>
		<td>{{line['departure_airport_name']}}</td>
		<td>{{line['city']}}</td>
        <td>{{line['arrival_airport_name']}}</td>
		<td>{{line['ar_port.city']}}</td>
        <td>{{line['first_name'] + ' ' + line['last_name']}}</td>
        <td>{{line['sold_price']}}</td>
	</tr>
{% endfor %}
</table>
<br><a href = "/Home"><button>Back to Home</button></a>

</body>
</html>
